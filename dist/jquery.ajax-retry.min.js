!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}(function(a){function b(b,c){var d=c.times,e=c.timeout;return function(f,g,h){function i(){j=a.ajax(k).retry({times:d-1,timeout:c.timeout,statusCodes:c.statusCodes}).then(l.resolve,l.reject)}var j,k=this,l=new a.Deferred,m=b.getResponseHeader("Retry-After");return l.abort=function(a){j.abort(a)},d>1&&(!b.statusCodes||a.inArray(f.status,b.statusCodes)>-1)?(m&&(e=isNaN(m)?new Date(m).getTime()-a.now():1e3*parseInt(m,10),(isNaN(e)||e<0)&&(e=c.timeout)),void 0!==e?setTimeout(i,e):i()):l.rejectWith(this,arguments),l}}a.ajaxPrefilter(function(a,c,d){d.retry=function(a){return a.statusCodes&&(this.statusCodes=a.statusCodes),this.then(null,b(this,a))}})});